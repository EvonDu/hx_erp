<?phpinclude_once(dirname(BASEPATH).'/inherit/BaseModel.php');class OrderSpu_model extends BaseModel{    /**     * @var table     */    protected $table = "t_sell_order_spu";    protected $pk = "id";    /**     * @fields     */    public $id,$order_id,$spu_id,$snap_price,$snap_pic,$snap_pic_normal,$remark;    /**     * 检测Spu是否下过单     */    public function checkSpuExist($spu_id){        $query = $this->db->select('COUNT(*) AS `Fnums`')            ->where(array("Fspu_id"=>$spu_id))->get($this->table);        $result = $query->row();        $count = $result->nums;        if($count > 0)            return true;        else            return false;    }    /**     * 获取上新时间     * @param $spuIds     * @return array     */    public function getArrivalTime($spuIds){        //判断数组        if(empty($spuIds) || !is_array($spuIds))            return array();        //条件筛选        $select = $this->db->select(array($this->table.".Fspu_id","MIN(t_sell_order.Fcreate_at) as Farrival"))            ->join('sell_order', $this->table.'.Forder_id = sell_order.Fid', 'left')            ->group_by($this->table.".Fspu_id")            ->where_in($this->table.".Fspu_id",$spuIds)            ->get($this->table);        //构成返回结果        $list = $select->result();        //返回        return $list;    }    /**     *     */    public function getArrivalSpu($start,$end){        //条件筛选        $select = $this->db->select(array($this->table.".Fspu_id","MIN(t_sell_order.Fcreate_at) as Farrival"))            ->join('sell_order', $this->table.'.Forder_id = sell_order.Fid', 'left')            ->group_by($this->table.".Fspu_id")            ->where("sell_order.Fcreate_at >=",$start)            ->where("sell_order.Fcreate_at <=",$end)            ->get($this->table);        //构成返回结果        $list = $select->result();        //返回        return $list;    }}?>